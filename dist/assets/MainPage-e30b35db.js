import{a as S,d as C,c as H,r as n,b as I,e as t,t as a,w as B,u as E,o as F,f as P,S as m}from"./index-a769e12a.js";const Y={addDate({userId:l,date:o}){return S.put(`/attendant/${l}`,{date:o})}},T={class:"container py-5"},U={class:"card card-body mx-auto d-flex"},j={class:"text-center"},A=["src"],N={class:"text-center mb-4"},O={class:"h3 mb-2 mt-4 font-weight-normal fs-1"},V={class:"text-center mb-4"},$={class:"h3 mb-3 mt-1 font-weight-normal fs-5"},q={class:"text-center mb-4"},z={class:"h3 mt-1 font-weight-normal fs-1"},G={class:"d-grid justify-content-center align-self-center"},J=["onClick"],K={class:"mt-5 mb-3 text-muted text-center"},Q=C({__name:"MainPage",setup(l){const o=P(),_=new Date().getFullYear(),c=H(()=>o.getters.currentUser),g=n(c.value.name),r=n(c.value.image),h=n(c.value.id),i=n(""),d=n("");r.value||(r.value="https://fakeimg.pl/120x130");function u(s){let e=new Date(s),p=["日","一","二","三","四","五","六"],w=e.getFullYear(),b=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,x=e.getDate()<10?"0"+e.getDate():e.getDate(),y=e.getHours()<10?"0"+e.getHours():e.getHours(),D=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),k=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds(),M=p[e.getDay()];i.value=y+":"+D+":"+k,d.value=w+"年"+b+"月"+x+"日 ("+M+")"}function f(){u(new Date),setInterval(function(){u(new Date)},1e3)}f();const v=async()=>{try{const s=new Date().valueOf(),{data:e}=await Y.addDate({userId:h.value,date:s});if(e.status==="error")throw new Error(e.message);m.fire({title:"Success",text:e.message,icon:"success",timer:1300})}catch{m.fire({title:"Error",text:"打卡失敗",icon:"error"})}};return(s,e)=>(F(),I("div",T,[t("div",U,[t("div",j,[t("img",{src:r.value,class:"rounded mt-5",alt:"..."},null,8,A)]),t("div",N,[t("h1",O,a(g.value),1)]),t("div",V,[t("h1",$,a(d.value),1)]),t("div",q,[t("h1",z,a(i.value),1)]),t("div",G,[t("button",{class:"btn btn-success btn-block mb-3 fs-1 clock",type:"button",onClick:B(v,["stop","prevent"])}," Clock ",8,J)]),t("p",K,"© 2022-"+a(E(_)),1)])]))}});export{Q as default};
