import{d as h,c as b,r as l,b as g,e,w as P,g as u,v as m,t as x,u as y,o as k,h as U,f as S,T as n,i as V}from"./index-a769e12a.js";const D={class:"container py-5"},q={class:"card card-body mx-auto d-flex"},B=["onSubmit"],M=e("div",{class:"text-center mb-4"},[e("h1",{class:"h3 mb-3 mt-4 font-weight-normal fs-1"},"帳號管理")],-1),T={class:"form-label-group mb-5 ms-5 mt-5 d-flex align-items-center fs-5"},C=e("label",{for:"email",class:"me-5"},"帳號",-1),E={class:"input"},I={class:"form-label-group mb-5 mt-4 ms-4 d-flex align-items-center fs-5"},Y=e("label",{for:"password",class:"me-5"},"原密碼",-1),j={class:"input"},A={class:"form-label-group mb-5 mt-4 ms-4 d-flex align-items-center fs-5"},F=e("label",{for:"newPassword",class:"me-5"},"新密碼",-1),N={class:"input"},R={class:"form-label-group mb-5 mt-4 ms-2 d-flex align-items-center fs-5"},z=e("label",{for:"checkPassword",class:"me-5"},"確認密碼",-1),G={class:"input"},H={class:"d-grid justify-content-center align-self-center mt-5"},J=["disabled"],K={class:"mt-5 mb-3 text-muted text-center"},Q=h({__name:"User",setup(L){const v=U(),f=S(),w=new Date().getFullYear(),p=b(()=>f.getters.currentUser),i=l(p.value.email),r=l(""),t=l(""),a=l(""),c=l(!1),_=async()=>{try{if(!i.value.trim()||!r.value.trim()||!t.value.trim()||!a.value.trim()){n.fire({icon:"warning",title:"請輸入所有欄位"});return}else if(t.value.trim().length<6||t.value.trim().length>12){t.value="",a.value="",n.fire({icon:"warning",title:"密碼長度需為6~12字元"});return}else if(t.value.length!==a.value.length){a.value="",n.fire({icon:"warning",title:"兩次密碼輸入不同"});return}c.value=!0;const d={email:i.value,password:r.value,newPassword:t.value,checkPassword:a.value},{data:s}=await V.editCurrentUser({userId:p.value.id,newData:d});if(s.status==="error")throw new Error(s.message);n.fire({icon:"success",title:"密碼已更新"}),r.value="",t.value="",a.value="",c.value=!1,v.push("/")}catch(d){const s=d.response.data;n.fire({icon:"error",title:s.message}),c.value=!1}};return(d,s)=>(k(),g("div",D,[e("div",q,[e("form",{class:"w-100",onSubmit:P(_,["prevent","stop"])},[M,e("div",T,[C,e("div",E,[u(e("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=o=>i.value=o),name:"email",type:"email",class:"form-control text-dark",autocomplete:"username",autofocus:"",disabled:""},null,512),[[m,i.value]])])]),e("div",I,[Y,e("div",j,[u(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=o=>r.value=o),name:"password",type:"password",class:"form-control",placeholder:"Password",autocomplete:"current-password",required:""},null,512),[[m,r.value]])])]),e("div",A,[F,e("div",N,[u(e("input",{id:"newPassword","onUpdate:modelValue":s[2]||(s[2]=o=>t.value=o),name:"newPassword",type:"password",class:"form-control",placeholder:"newPassword",autocomplete:"current-password",required:""},null,512),[[m,t.value]])])]),e("div",R,[z,e("div",G,[u(e("input",{id:"checkPassword","onUpdate:modelValue":s[3]||(s[3]=o=>a.value=o),name:"checkPassword",type:"password",class:"form-control",placeholder:"checkPassword",autocomplete:"current-password",required:""},null,512),[[m,a.value]])])]),e("div",H,[e("button",{class:"btn btn-lg btn-primary btn-block mb-3",type:"submit",disabled:c.value}," 更新 ",8,J)]),e("p",K,"© 2022-"+x(y(w)),1)],40,B)])]))}});export{Q as default};
