import{d as y,u as x,b as P,i as k,r,c as U,e,w as S,f as m,v as f,t as j,h as C,o as V,L as i,T as c,k as D}from"./index-45bd4f3d.js";const L={class:"container mt-4 col-sm-6"},q={class:"card card-body"},B=["onSubmit"],E=e("div",{class:"text-center justify-content-center"},[e("h1",{class:"h3 mt-4 font-weight-normal fs-1"},"帳號管理")],-1),M={class:"form-label-group mt-3 d-flex justify-content-evenly align-items-center fs-5"},T=e("label",{for:"email",class:"label-name w-25 text-center"},"帳號",-1),A={class:"input w-50"},I={class:"form-label-group mt-4 d-flex justify-content-evenly align-items-center fs-5"},Y=e("label",{for:"password",class:"label-name w-25 text-center"},"原密碼",-1),F={class:"input w-50 d-flex"},N={class:"form-label-group mt-4 d-flex justify-content-evenly align-items-center fs-5"},R=e("label",{for:"newPassword",class:"label-name w-25 text-center"},"新密碼",-1),z={class:"input w-50 d-flex"},G={class:"form-label-group mt-4 d-flex justify-content-evenly align-items-center fs-5"},H=e("label",{for:"checkPassword",class:"label-name w-25 text-center"},"確認密碼",-1),J={class:"input w-50 d-flex"},K={class:"d-grid justify-content-center align-self-center mt-5"},O=["disabled"],Q={class:"mt-5 mb-3 text-muted text-center"},Z=y({__name:"User",setup(W){const b=x(),_=P(),h=new Date().getFullYear(),w=k(()=>_.currentUser),d=r(w.value.email),n=r(""),a=r(""),l=r(""),u=r(!1),p=function(o){const s=o.target,t=s.previousSibling,v=t.type==="password"?"text":"password";t.type=v,v==="text"?s.classList.replace("bi-eye-slash","bi-eye"):s.classList.replace("bi-eye","bi-eye-slash")},g=async()=>{try{if(!d.value.trim()||!n.value.trim()||!a.value.trim()||!l.value.trim()){await i.fire({}),c.fire({icon:"warning",title:"請輸入所有欄位"});return}else if(a.value.trim().length<6||a.value.trim().length>12){await i.fire({}),a.value="",l.value="",c.fire({icon:"warning",title:"密碼長度需為6~12字元"});return}else if(a.value.length!==l.value.length){await i.fire({}),l.value="",c.fire({icon:"warning",title:"兩次密碼輸入不同"});return}u.value=!0;const o={email:d.value,password:n.value,newPassword:a.value,checkPassword:l.value},{data:s}=await D.editCurrentUser({userId:w.value.id,newData:o});if(s.status==="error")throw new Error(s.message);await i.fire({timer:1300}),c.fire({icon:"success",title:"密碼已更新"}),n.value="",a.value="",l.value="",u.value=!1,b.push("/")}catch(o){const s=o.response.data;await i.fire({timer:1300}),c.fire({icon:"error",title:s.message}),u.value=!1}};return(o,s)=>(V(),U("div",L,[e("div",q,[e("form",{class:"d-block",onSubmit:S(g,["prevent","stop"])},[E,e("div",M,[T,e("div",A,[m(e("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=t=>d.value=t),name:"email",type:"email",class:"form-control text-dark",autocomplete:"username",autofocus:"",disabled:""},null,512),[[f,d.value]])])]),e("div",I,[Y,e("div",F,[m(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=t=>n.value=t),name:"password",type:"password",class:"form-control",placeholder:"Password",autocomplete:"current-password",required:""},null,512),[[f,n.value]]),e("i",{class:"bi align-self-center bi-eye-slash",onClick:s[2]||(s[2]=t=>p(t))})])]),e("div",N,[R,e("div",z,[m(e("input",{id:"newPassword","onUpdate:modelValue":s[3]||(s[3]=t=>a.value=t),name:"newPassword",type:"password",class:"form-control",placeholder:"newPassword",autocomplete:"current-password",required:""},null,512),[[f,a.value]]),e("i",{class:"bi align-self-center bi-eye-slash",onClick:s[4]||(s[4]=t=>p(t))})])]),e("div",G,[H,e("div",J,[m(e("input",{id:"checkPassword","onUpdate:modelValue":s[5]||(s[5]=t=>l.value=t),name:"checkPassword",type:"password",class:"form-control",placeholder:"checkPassword",autocomplete:"current-password",required:""},null,512),[[f,l.value]]),e("i",{class:"bi align-self-center bi-eye-slash",onClick:s[6]||(s[6]=t=>p(t))})])]),e("div",K,[e("button",{class:"btn btn-lg btn-primary btn-block",type:"submit",disabled:u.value}," 更新 ",8,O)]),e("p",Q,"© 2022-"+j(C(h)),1)],40,B)])]))}});export{Z as default};
