import{a as d,d as C,b as H,i as T,r as c,c as U,e,t as r,w as $,h as B,o as E,L as u,j as m}from"./index-45bd4f3d.js";const g={clockIn({userId:o,date:a}){return d.post(`/attendant/${o}`,{date:a})},clockOut({userId:o,date:a}){return d.put(`/attendant/${o}`,{date:a})},getTodayAtt({userId:o,date:a}){return d.get(`/attendant/${o}/${a}`)}},F={class:"container mt-4 col-sm-6"},O={class:"card card-body mx-auto d-gird w-75"},P=e("div",{class:"text-center"},[e("img",{src:"https://fakeimg.pl/120x130",class:"rounded mt-4",alt:"..."})],-1),Y={class:"text-center mb-4"},j={class:"h3 mb-2 mt-4 font-weight-normal fs-1"},L={class:"text-center mb-3"},V={class:"h3 mb-3 mt-1 font-weight-normal fs-5"},N={class:"text-center mb-4"},q={class:"h3 font-weight-normal fs-1"},z={class:"row justify-content-center"},G=["onClick"],J={class:"mt-4 mb-2 text-muted text-center"},Q=C({__name:"MainPage",setup(o){const a=H(),v=new Date().getFullYear(),i=T(()=>a.currentUser),p=c(i.value.name),_=c(i.value.image),l=c(i.value.id),h=c(""),f=c("");_.value||(_.value="https://fakeimg.pl/120x130");function w(n){let t=new Date(n),s=["日","一","二","三","四","五","六"],b=t.getFullYear(),y=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,D=t.getDate()<10?"0"+t.getDate():t.getDate(),M=t.getHours()<10?"0"+t.getHours():t.getHours(),I=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),S=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds(),A=s[t.getDay()];h.value=M+":"+I+":"+S,f.value=b+"年"+y+"月"+D+"日 ("+A+")"}function k(){w(new Date),setInterval(function(){w(new Date)},1e3)}k();const x=async()=>{try{const n=new Date().valueOf(),t=await g.getTodayAtt({userId:l.value,date:n});let s;if(t.data.attendant?s=await g.clockOut({userId:l.value,date:n}):s=await g.clockIn({userId:l.value,date:n}),s.data.status==="error")throw new Error(s.data.message);s.data.message==="上班打卡成功"&&(await u.fire({timer:1e3}),m.fire({title:s.data.message,text:"祝你有美好的一天",icon:"success"})),s.data.message==="下班打卡成功"&&(await u.fire({timer:1e3}),m.fire({title:s.data.message,text:"辛苦了 路上小心~~~",icon:"success"}))}catch{await u.fire({timer:1e3}),m.fire({title:"Error",text:"打卡失敗",icon:"error"})}};return(n,t)=>(E(),U("div",F,[e("div",O,[P,e("div",Y,[e("h1",j,r(p.value),1)]),e("div",L,[e("h1",V,r(f.value),1)]),e("div",N,[e("h1",q,r(h.value),1)]),e("div",z,[e("button",{id:"clock",class:"btn btn-success fs-1 disable",type:"button",onClick:$(x,["stop","prevent"])},"Clock ",8,G)]),e("p",J,"© 2022-"+r(B(v)),1)])]))}});export{Q as default};
