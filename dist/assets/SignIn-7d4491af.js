import{a as g,d as h,u as w,r as i,b as y,c as x,e,w as S,f as d,v as k,g as I,n as U,h as m,t as C,o as D,T as p,L as _}from"./index-45bd4f3d.js";const M={signIn({account:u,password:l}){return g.post("/users/signin",{account:u,password:l})}},P={class:"container mt-5 col-sm-6"},j={class:"card card-body d-block"},A=["onSubmit"],B=e("div",{class:"text-center mb-4"},[e("h1",{class:"h3 mb-3 mt-4 font-weight-normal fs-1"},"Login")],-1),E={class:"form-label-group d-flex mb-3 mt-5 align-items-center justify-content-center fs-5"},L=e("label",{for:"account",class:"label-name w-25 text-center"},"Account ",-1),T={class:"w-75"},V={class:"form-label-group mb-5 mt-4 d-flex align-items-center justify-content-center fs-5"},q=e("label",{for:"password",class:"label-name w-25 text-center"},"Password",-1),z={class:"w-75 input d-flex"},H=["type"],Y={class:"d-grid justify-content-center align-self-center mt-5"},F=["disabled"],N={class:"mt-5 mb-3 text-muted text-center"},$=h({__name:"SignIn",setup(u){const l=w(),o=i(""),a=i(""),f=y(),b=new Date().getFullYear(),n=i(!0);let c=i(!1);const v=async()=>{try{if(!o.value||!a.value){p.fire({icon:"warning",title:"請填寫這個欄位。"});return}c.value=!0;const{data:s}=await M.signIn({account:o.value,password:a.value});if(s.status==="error")throw new Error(s.message);localStorage.setItem("token",s.token),f.setCurrentUser(s.user),await _.fire({timer:1300}),l.push("/mainpage")}catch(s){const t=s.response.data;await _.fire({timer:1300}),p.fire({icon:"error",title:t.message}),c.value=!1}};return(s,t)=>(D(),x("div",P,[e("div",j,[e("form",{class:"w-100",onSubmit:S(v,["prevent","stop"])},[B,e("div",E,[L,e("div",T,[d(e("input",{id:"account","onUpdate:modelValue":t[0]||(t[0]=r=>o.value=r),name:"account",type:"account",class:"form-control",placeholder:"account",autocomplete:"username",required:"",autofocus:""},null,512),[[k,o.value]])])]),e("div",V,[q,e("div",z,[d(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=r=>a.value=r),name:"password",type:n.value?"password":"text",class:"form-control",placeholder:"Password",autocomplete:"current-password",required:""},null,8,H),[[I,a.value]]),e("i",{id:"checkEye",class:U([n.value?"bi-eye-slash":"bi-eye","bi"]),onClick:t[2]||(t[2]=r=>n.value=!n.value)},null,2)])]),e("div",Y,[e("button",{class:"btn btn-lg btn-primary btn-block mb-3",type:"submit",disabled:m(c)}," Submit ",8,F)]),e("p",N,"© 2022-"+C(m(b)),1)],40,A)])]))}});export{$ as default};
