import{d as I,u as H,s as M,r as g,x as A,o as t,c as o,e as m,F as p,q as k,g as D,B as O,t as i}from"./index-3a610f39.js";import{a as B}from"./admin-c5ce6d03.js";const R={class:"container py-4 mt-3"},S={class:"mb-5 me-5 d-flex flex-row-reverse bd-highlight"},q=["value"],N=O('<ul class="list-group list-group-horizontal"><li id="date" class="list-group-item border-dark">日期</li><li id="checkIn" class="list-group-item border-dark">上班時間</li><li id="checkOut" class="list-group-item border-dark">下班時間</li><li id="absense" class="list-group-item border-dark">缺勤紀錄</li><li id="descriptions" class="list-group-item border-dark">備註</li></ul>',1),z={key:0,id:"date",class:"list-group-item text-danger"},C={key:1,id:"date",class:"list-group-item"},F={key:2,id:"checkIn",class:"list-group-item text-danger"},L={key:3,id:"checkIn",class:"list-group-item"},U={key:4,id:"checkOut",class:"list-group-item text-danger"},V={key:5,id:"checkOut",class:"list-group-item"},E={key:6,id:"absense",class:"list-group-item text-danger"},P={key:7,id:"absense",class:"list-group-item text-warning"},j={key:8,id:"absense",class:"list-group-item text-success"},G={key:9,id:"absense",class:"list-group-item text-secondary"},J={key:10,id:"descriptions",class:"list-group-item text-danger"},K={key:11,id:"descriptions",class:"list-group-item"},X=I({__name:"AttendanceRecord",setup(Q){const _=H(),a=M(),u=g(!1),y=Array.from({length:12}).map((r,s)=>s+1),b=r=>{_.push({name:"attendant",query:{month:r.target.value}})};function d(r){const s=new Date(r);let e="",c=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,l=s.getDate()<10?"0"+s.getDate():s.getDate(),x=s.getHours()<10?"0"+s.getHours():s.getHours(),v=s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes(),w=s.getSeconds()<10?"0"+s.getSeconds():s.getSeconds();return e=c+"/"+l+" "+x+":"+v+":"+w,e}const n=g([]);async function h({month:r}){try{const s=await B.getUserAttendant({month:r,userId:Number(a.params.id)});n.value=s.data,n.value.map(e=>{const c=e.checkIn,l=e.checkOut;c&&(e.checkIn=d(c),u.value=!e.isAbsense),l&&(e.checkOut=d(l))})}catch(s){console.log("error",s)}}const{month:f}=a.query;return h({month:f}),A((r,s)=>{const{month:e}=r.query;h({month:e})}),(r,s)=>(t(),o("div",R,[m("div",S,[m("select",{class:"btn btn-secondary",role:"button",id:"dropdownMenuLink",onChange:s[0]||(s[0]=e=>b(e))},[(t(!0),o(p,null,k(D(y),e=>(t(),o("option",{key:e,value:e},i(e)+" 月 ",9,q))),128))],32)]),N,(t(!0),o(p,null,k(n.value,e=>(t(),o("ul",{class:"list-group list-group-horizontal",key:e.id},[e.isHoliday?(t(),o("li",z,i(e.date)+" ("+i(e.week)+") ",1)):(t(),o("li",C,i(e.date)+" ("+i(e.week)+")",1)),e.isHoliday?(t(),o("li",F,i(e.checkIn),1)):(t(),o("li",L,i(e.checkIn),1)),e.isHoliday?(t(),o("li",U,i(e.checkOut),1)):(t(),o("li",V,i(e.checkOut),1)),e.isHoliday?(t(),o("li",E)):e.isAbsense?(t(),o("li",P," 缺勤 ")):u.value?(t(),o("li",j," 到勤 ")):(t(),o("li",G," 尚未上班 ")),e.isHoliday?(t(),o("li",J,i(e.description),1)):(t(),o("li",K,i(e.description),1))]))),128))]))}});export{X as default};
